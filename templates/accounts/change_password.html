{% extends 'base.html' %}
{% block title %}Change Password | RCTI{% endblock %}

{% block content %}
{% if request.user.is_superuser %}
{% include 'partials/admin_sidebar.html' %}
{% elif request.user.student_profile %}
{% include 'partials/student_sidebar.html' %}
{% elif request.user.faculty_profile %}
{% include 'partials/faculty_sidebar.html' %}
{% endif %}

<div class="flex-1 flex flex-col h-full overflow-hidden relative">

    <header class="h-20 bg-white/80 backdrop-blur-md border-b border-slate-200 flex items-center px-8 z-40 shrink-0">
        <h2 class="text-xl font-bold font-tech text-slate-800 flex items-center gap-3">
            <i class="fa-solid fa-shield-halved text-slate-400"></i> Security Settings
        </h2>
    </header>

    <main class="flex-1 overflow-y-auto p-6 md:p-8 custom-scroll">

        <div class="max-w-2xl mx-auto">

            <div class="bg-white rounded-[1.5rem] border border-slate-200 shadow-sm p-8">

                <div class="flex items-center gap-4 mb-8 border-b border-slate-100 pb-6">
                    <div
                        class="w-14 h-14 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center text-2xl">
                        <i class="fa-solid fa-lock"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-slate-800 font-tech">Change Password</h1>
                        <p class="text-sm text-slate-500">Update your password to keep your account secure.</p>
                    </div>
                </div>

                <form method="post" class="space-y-6">
                    {% csrf_token %}

                    {% if form.non_field_errors %}
                    <div class="p-4 bg-red-50 border border-red-100 rounded-xl flex items-start gap-3">
                        <i class="fa-solid fa-circle-exclamation text-red-500 mt-0.5"></i>
                        <div class="text-sm text-red-600 font-medium">
                            {% for error in form.non_field_errors %}
                            <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                    {% for field in form %}
                    <div>
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-2 ml-1">
                            {{ field.label }}
                        </label>

                        <div class="relative">
                            {{ field }}
                            <style>
                                input[type="password"] {
                                    width: 100%;
                                    padding: 0.875rem 1rem;
                                    border-radius: 0.75rem;
                                    background-color: #f8fafc;
                                    border: 1px solid #e2e8f0;
                                    outline: none;
                                    font-weight: 500;
                                    color: #334155;
                                    transition: all 0.2s;
                                }

                                input[type="password"]:focus {
                                    border-color: #3b82f6;
                                    background-color: #fff;
                                    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
                                }
                            </style>
                        </div>

                        {% if field.help_text %}
                        <p class="text-[10px] text-slate-400 mt-1.5 ml-1 leading-relaxed">{{ field.help_text|safe }}
                        </p>
                        {% endif %}

                        {% for error in field.errors %}
                        <p class="text-xs text-red-500 font-bold mt-1 ml-1 flex items-center gap-1">
                            <i class="fa-solid fa-circle-xmark"></i> {{ error }}
                        </p>
                        {% endfor %}
                    </div>
                    {% endfor %}

                    <div class="pt-4 flex items-center gap-4">
                        <button type="submit"
                            class="flex-1 py-3.5 bg-slate-900 text-white font-bold rounded-xl hover:bg-blue-600 hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300 flex items-center justify-center gap-2">
                            <i class="fa-solid fa-check-circle"></i> Update Password
                        </button>

                        <a href="javascript:history.back()"
                            class="px-6 py-3.5 border border-slate-200 text-slate-600 font-bold rounded-xl hover:bg-slate-50 transition-colors">
                            Cancel
                        </a>
                    </div>
                </form>
            </div>

            <p class="text-center text-xs text-slate-400 mt-8">
                © 2026 RC Technical Institute • Secured by IT Dept
            </p>

        </div>

    </main>
</div>

{% endblock %}